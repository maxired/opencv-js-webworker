(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n("o0o1"),a=n.n(r),s=n("q1tI"),i=n.n(s);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"_dispatch",value:function(e){var t=this,n=e.msg;return this._status[n]=["loading"],this.worker.postMessage(e),new Promise((function(e,r){var a=setInterval((function(){var s=t._status[n];"done"===s[0]&&e(s[1]),"error"===s[0]&&r(s[1]),"loading"!==s[0]&&(delete t._status[n],clearInterval(a))}),50)}))}},{key:"load",value:function(){var e=this;return this._status={},this.worker=new Worker("".concat("/opencv-js-webworker","/js/cv.worker.js")),this.worker.onmessage=function(t){return e._status[t.data.msg]=["done",t]},this.worker.onerror=function(t){return e._status[t.data.msg]=["error",t]},this._dispatch({msg:"load"})}},{key:"imageProcessing",value:function(e){return this._dispatch({msg:"imageProcessing",payload:e})}}])&&o(t.prototype,n),r&&o(t,r),e}()),c=i.a.createElement,l=200;function d(){var e=Object(s.useState)(!1),t=e[0],n=e[1],r=Object(s.useRef)(null),i=Object(s.useRef)(null);return Object(s.useEffect)((function(){function e(){var e,t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.current.width=l,r.current.height=l,!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){n.next=8;break}return n.next=5,a.a.awrap(navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:l,height:l}}));case 5:return e=n.sent,r.current.srcObject=e,n.abrupt("return",new Promise((function(e){r.current.onloadedmetadata=function(){e(r.current)}})));case 8:return t="This browser does not support video capture, or this device does not have a camera",alert(t),n.abrupt("return",Promise.reject(t));case 11:case"end":return n.stop()}}),null,null,null,Promise)}!function(){var t;a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(e());case 2:return(t=n.sent).play(),n.abrupt("return",t);case 5:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]),c("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},c("video",{className:"video",playsInline:!0,ref:r}),c("button",{disabled:t,style:{width:l,padding:10},onClick:function(){var e,t,s;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n(!0),(e=i.current.getContext("2d")).drawImage(r.current,0,0,l,l),t=e.getImageData(0,0,l,l),o.next=6,a.a.awrap(u.load());case 6:return o.next=8,a.a.awrap(u.imageProcessing(t));case 8:s=o.sent,e.putImageData(s.data.payload,0,0),n(!1);case 11:case"end":return o.stop()}}),null,null,null,Promise)}},t?"Processing...":"Take a photo"),c("canvas",{ref:i,width:l,height:l}))}},"m0L+":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])}},[["m0L+",0,2,1]]]);